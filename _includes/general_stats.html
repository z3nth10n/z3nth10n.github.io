<div id="genstats" class="col-md-3 align-sm-right vertical-margin order-xs-fourth col-xs-expand">
    <box class="both-offset expand-width">
        <p>
            <h3>{% t 'stats-caption' %}</h3>
            <p>({% t 'stats_last' %} {{ site.data.period }} {% t 'stats_days' %})</p>
        </p>

        {% for header in site.data.headers %}
        
            <p>
                {% assign hvalue = header.value | plus: 0 %}
                {% assign statname = 'stats_' | append: header.name %}
                {{ hvalue | round }} {% t statname %}
            </p>
            <p class="sub">
                    {% if site.jekyll_ga.compare_period %}
                    (
                    {% t 'stats_last' %} {{ site.data.period }} {% t 'stats_days' %}: 
                    {% if header.value_perc != "∞" %}
                        {% assign perc = header.value_perc | plus: 0 %}

                        {% if header.name != "bounceRate" %}
                            {% if perc > 0 %}
                                <i class="fas fa-arrow-up color-green"></i>
                            {% elsif perc == 0 %}
                                <i class="fas fa-equals"></i>
                            {% elsif perc < 0 %}
                                <i class="fas fa-arrow-down color-red"></i>
                            {% endif %}
                        {% else %}
                            {% if perc < 0 %}
                                <i class="fas fa-arrow-up color-green"></i>
                            {% elsif perc == 0 %}
                                <i class="fas fa-equals"></i>
                            {% elsif perc > 0 %}
                                <i class="fas fa-arrow-down color-red"></i>
                            {% endif %}
                        {% endif %}

                        {{ perc | round }} % | 
                        
                        {% assign diff = header.diff_value %}
                        {% if diff > 0 %}+{% endif %}
                        {{ diff | round }}{% if header.name == "bounceRate" %}%{% endif %} {% t 'stats_last_period' %}
                    {% else %}
                    ∞ %    
                    {% endif %}
                    )
                {% endif %}
            </p>

        {% endfor %}
    </box>
</div>